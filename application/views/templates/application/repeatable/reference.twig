{% import "forms.macro.twig" as forms %}
{% import "application/section.macro.twig" as section %}

<div id="reference-#{{reference.id}}" class="{% if hide %}hidden{% endif %} reference">
	<fieldset class="nested">
		
		{% if reference.id > 3 and not reference.requestHasBeenSent %}
			{{ section.removeSubSectionButton('reference-#' ~ reference.id ) }}
		{% endif %}

		<legend>Recommendation</legend>
		<div>
			{{ forms.boolean( {'title':'Will this individual submit a recommendation online?', 
						'name':'reference-isSubmittingOnline-#' ~ reference.id,
						'value':reference.isSubmittingOnline,
						'isRequired':true
					} ) }}

			<p class="message warning">An electronic recommendation form will be emailed to this recommender if you click yes.</p>

			{{ forms.input( {'title':'First Name', 
						'name':'reference-firstName-#' ~ reference.id,
						'value':reference.firstName,
						'size': 30,
						'maxLength':30,
						'isRequired':true
					} ) }}

			{{ forms.input( {'title':'Last Name', 
						'name':'reference-lastName-#' ~ reference.id,
						'value':reference.lastName,
						'size': 30,
						'maxLength':30,
						'isRequired':true
					} ) }}

			
			{{ forms.input( {'title': 'Email',
						'name':'reference-email-#' ~ reference.id,
						'value':reference.email,
						'size': 30,
						'isRequired':true
					} ) }}
			
			{{ forms.select( {'title':'Relationship', 
						'name':'reference-relationship-#' ~ reference.id,
						'value':reference.relationship,
						'options':reference.options_relationship, 
					} ) }}

			{{ forms.input( {'title':'Phone Number', 
						'name':'contactInformation-primaryPhone-#' ~ reference.contactInformationId,
						'value':reference.contactInformation.primaryPhone,
						'size': 16,
						'maxLength':16,
					} ) }}


			<div style="clear:both"></div>
		</div>

		<div style="clear:both"></div>

		<fieldset id="reference_addr-#{{reference.id}}" name="reference_addr-#{{reference.id}}" class="nested">
			<legend>Address</legend>
			
			{{ forms.input( {'title':'Street', 
						'name':'contactInformation-streetAddress1-#' ~ reference.contactInformationId,
						'value':reference.contactInformation.streetAddress1,
						'size': 30,
						'maxLength':30,
					} ) }}

			{{ forms.input( {'title':'Additional', 
						'name':'contactInformation-streetAddress2-#' ~ reference.contactInformationId,
						'value':reference.contactInformation.streetAddress2,
						'size': 30,
						'maxLength':30,
					} ) }}

			{{ forms.input( {'title':'City', 
						'name':'contactInformation-city-#' ~ reference.contactInformationId,
						'value':reference.contactInformation.city,
						'size': 30,
						'maxLength':30,
					} ) }}

			{{ forms.select( {'title':'State', 
						'name':'contactInformation-state-#' ~ reference.contactInformationId,
						'value':reference.contactInformation.state,
						'options':reference.options_state,
					} ) }}

			{{ forms.input( {'title':'Postal Code', 
						'name':'contactInformation-postal-#' ~ reference.contactInformationId,
						'value':reference.contactInformation.postal,
						'size': 15,
						'maxLength':15,
					} ) }}

			{{ forms.select( {'title':'Country', 
						'name':'contactInformation-country-#' ~ reference.contactInformationId,
						'value':reference.contactInformation.country,
						'options':reference.options_country,
					} ) }}
			
		
			<div style="clear:both"></div>
		</fieldset><!-- end fieldset "reference1_addr" -->
		<div id='sendEmailButton{{reference.id}}'>
			<button class="sendEmail button green small add" onclick="requestRecommendation('#sendEmailButton{{reference.id}}',{{reference.id}}); return false;" title="Add">Email Recommendation Form to Reference</button><span class='emailSentMessage'></span>
			<script type='text/javascript'> setButtonDisplay('#sendEmailButton{{reference.id}} .sendEmail', '{{reference.isSubmittingOnline}}', '{{reference.requestHasBeenSent}}'); </script>
		<div>
		<div style="clear:both"></div>


	</fieldset>
	<div style="clear:both;"></div>
</div>
